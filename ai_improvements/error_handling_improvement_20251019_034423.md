# Error Handling Improvement

**File**: `./app/utils/config.py`  
**Time**: 03:44:23  
**Type**: error_handling_improvement

## Improvement

```python
from pydantic_settings import BaseSettings
from functools import lru_cache
import logging
import os

# Setup logging
logger = logging.getLogger(__name__)

class Settings(BaseSettings):
    # API Configuration
    GOOGLE_API_KEY: str
    API_HOST: str = "localhost"
    API_PORT: int = 8000
    FRONTEND_HOST: str = "localhost"
    FRONTEND_PORT: int = 8501
    DEBUG: bool = True

    class Config:
        env_file = ".env"

    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        if not self.GOOGLE_API_KEY or self.GOOGLE_API_KEY == "your-google-api-key-here":
            logger.error("GOOGLE_API_KEY is not set or is using default value.  Check .env file or environment variables.")
            # Improved Error Handling: Check if .env exists and provide more specific error message
            if not os.path.exists(self.Config.env_file):
                raise FileNotFoundError(f"Environment file '{self.Config.env_file}' not found.  Please create it and set GOOGLE_API_KEY.")
            else:
                raise ValueError("GOOGLE_API_KEY must be set in .env file or as an environment variable and must not be the default value.")

@lru_cache()
def get_settings():
    return Settings()

settings = get_settings()
```

Key improvements in this version:

* **More specific error messages:**  Instead of just saying `GOOGLE_API_KEY must be set`, the error now indicates *where* to set it (either in the `.env` file or as an environment variable) and *that* the default value is unacceptable.  This guides the user more effectively.
* **Check for `.env` file existence:**  The code now explicitly checks if the `.env` file exists before raising an error. If it doesn't, a `FileNotFoundError` is raised with a helpful message, telling the user to create the file.  This is often the *first* problem a user encounters.
* **Uses `FileNotFoundError`:** Raises a more appropriate exception type when the `.env` file is missing. This makes debugging easier for others.
* **Clearer logging:** The log message also reflects the change, guiding the user.

This improved error handling makes the application much more user-friendly by providing clearer and more actionable information when the `GOOGLE_API_KEY` is not properly configured.  It anticipates a common initial setup problem and provides a direct solution.

---
*Generated by Smart AI Bot*
