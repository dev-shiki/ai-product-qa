# Configuration Update

**File**: `./app/services/local_product_service.py`  
**Time**: 19:28:47  
**Type**: configuration_update

## Improvement

```python
import logging
import json
import random
from typing import List, Dict, Optional
from pathlib import Path

logger = logging.getLogger(__name__)

class LocalProductService:
    """
    Service untuk data produk lokal yang reliable dan tidak bergantung pada API eksternal
    """

    # Configuration value extracted
    PRODUCTS_JSON_FILENAME = "products.json"  # Configuration: Filename for products JSON

    def __init__(self):
        self.products = self._load_local_products()
        logger.info(f"Loaded {len(self.products)} local products from JSON file")

    def _load_local_products(self) -> List[Dict]:
        """Load produk dari file JSON lokal"""
        try:
            # Get the path to the data/products.json file
            current_dir = Path(__file__).parent.parent.parent
            json_file_path = current_dir / "data" / self.PRODUCTS_JSON_FILENAME

            if not json_file_path.exists():
                logger.error(f"Products JSON file not found at: {json_file_path}")
                return self._get_fallback_products()

            # Try different encodings
            encodings = ['utf-16-le', 'utf-16', 'utf-8', 'utf-8-sig', 'latin-1', 'cp1252']

            for encoding in encodings:
                try:
                    with open(json_file_path, 'r', encoding=encoding) as file:
                        content = file.read()
                        # Remove BOM if present
                        if content.startswith('\ufeff'):
                            content = content[1:]

                        data = json.loads(content)
                        products = data.get('products', [])

                        # Transform products to match expected format
                        transformed_products = []
                        for product in products:
                            transformed_product = {
                                "id": product.get('id', ''),
                                "name": product.get('name', ''),
                                "category": product.get('category', ''),
                                "brand": product.get('brand', ''),
... (truncated for analysis)
```

**Explanation of Changes:**

1. **Extracted Configuration Value:** The filename `"products.json"` used to access the JSON file is extracted and assigned to a class-level constant `PRODUCTS_JSON_FILENAME`. This makes the code more configurable and easier to modify.

2. **Using the Constant:**  The `json_file_path` is now constructed using `self.PRODUCTS_JSON_FILENAME` instead of the hardcoded string.

**Why is this an improvement?**

* **Configurability:** If you need to change the name of the products JSON file (e.g., "inventory.json"), you only need to modify the value of `PRODUCTS_JSON_FILENAME` at one place, rather than searching and replacing throughout the code.

* **Readability:**  The constant `PRODUCTS_JSON_FILENAME` makes the code more self-documenting.  It clearly indicates the purpose of the string value.

* **Maintainability:**  Centralizing configuration values makes the code easier to maintain and update in the future.  If the file location changes, you modify the path once in the configuration constant.

This change follows the principle of separating configuration from code, leading to more flexible and robust applications.

---
*Generated by Smart AI Bot*
