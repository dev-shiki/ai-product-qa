# Logging Enhancement

**File**: `./app/services/product_data_service.py`  
**Time**: 04:37:17  
**Type**: logging_enhancement

## Improvement

```python
import logging
from typing import List, Dict, Optional
from app.services.local_product_service import LocalProductService

logger = logging.getLogger(__name__)

class ProductDataService:
    """
    Service untuk mengambil data produk dari sumber lokal yang reliable
    """
    
    def __init__(self):
        # Use LocalProductService as primary data source
        self.local_service = LocalProductService()
        logger.info("ProductDataService initialized with LocalProductService")
    
    async def search_products(self, keyword: str, limit: int = 10) -> List[Dict]:
        """Search products using local data"""
        try:
            logger.info(f"Searching products with keyword: {keyword}")
            # Use awaitable wrapper for sync method
            import asyncio
            loop = asyncio.get_event_loop()
            products = await loop.run_in_executor(None, self.local_service.search_products, keyword, limit)
            logger.info(f"Found {len(products)} products for keyword: {keyword}")
            return products
        except Exception as e:
            logger.error(f"Error searching products: {str(e)}")
            return []
    
    async def get_products(self, limit: int = 20, category: Optional[str] = None, search: Optional[str] = None) -> List[Dict]:
        """Get products with optional filtering"""
        try:
            logger.info(f"Getting products with limit: {limit}, category: {category}, search: {search}") # Added logging
            if search:
                products = await self.search_products(search, limit)
                logger.info(f"Products found using search: {search}, count: {len(products)}") #Added Logging
                return products
            elif category:
                products = self.get_products_by_category(category, limit)
                logger.info(f"Products found in category: {category}, count: {len(products)}") #Added Logging
                return products
            else:
                products = self.get_all_products(limit)
                logger.info(f"All Products found with limit: {limit}, count: {len(products)}") #Added Logging
                return products
        except Exception as e:
            logger.error(f"Error getting products: {str(e)}")
            return self.local_service.get_products(limit)
    
    async def get_categories(self) -> List[str]:
        """Get available categories"""
        try:
            return self.local_service.get_categories()
        except Exception as e:
            logger.error(f"Error getting categories: {str(e)}")
            return []
```

---
*Generated by Smart AI Bot*
