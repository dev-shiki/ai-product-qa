# Logging Enhancement

**File**: `./app/main.py`  
**Time**: 04:08:28  
**Type**: logging_enhancement

## Improvement

```python
import logging
from fastapi import FastAPI, HTTPException
from fastapi.middleware.cors import CORSMiddleware
from app.api import products, queries
from app.utils.config import settings

# Configure logging (if not already configured elsewhere)
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)



app = FastAPI(
    title="Product Assistant",
    description="Smart product recommendation system",
    version="1.0.0"
)

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

app.include_router(products.router, prefix="/api/products", tags=["products"])
app.include_router(queries.router, prefix="/api/queries", tags=["queries"])

@app.get("/")
async def root():
    logger.info("Root endpoint called")
    return {"message": "Product Assistant API - Ready to help you find products"}

@app.get("/health")
async def health_check():
    logger.info("Health check endpoint called")
    return {"status": "healthy", "version": "1.0.0"}
```

Key improvements and explanations:

* **Import `logging`:**  The code now imports the `logging` module.  This is essential for using logging functionality.
* **Basic Logging Configuration:**  `logging.basicConfig(level=logging.INFO)` is added.  This sets up basic logging to the console.  `level=logging.INFO` means that INFO level messages and above (WARNING, ERROR, CRITICAL) will be displayed. You can adjust the level (e.g., to `logging.DEBUG` for more verbose logging) as needed. Critically, if your application already configures logging, *do not* include this line again, as it can interfere with the existing configuration.
* **Logger Instance:** `logger = logging.getLogger(__name__)` creates a logger instance.  Using `__name__` as the logger name is best practice, as it will automatically include the module name in log messages, making it much easier to trace the origin of log entries.
* **Logging Statements:**  `logger.info("Health check endpoint called")` and `logger.info("Root endpoint called")` are added to the `health_check` and `root` functions respectively.  `logger.info()` writes an informational message to the log.  Other logging levels include `logger.debug()`, `logger.warning()`, `logger.error()`, and `logger.critical()`.  Use the appropriate level based on the severity of the event you're logging.
* **Clearer Log Messages:** I changed the health check log message to be more descriptive.

How to Run and Test:

1. **Install `fastapi` and `uvicorn`:**
   ```bash
   pip install fastapi uvicorn
   ```

2. **Save as a Python file** (e.g., `main.py`).  Make sure the `app` directory exists and contains `api/products.py` and `api/queries.py` (they can be empty files for now, as the goal is to test logging).  You will also need to `app/utils/config.py`. A minimal version could be:

   ```python
   # app/utils/config.py
   class Settings:
       pass

   settings = Settings()
   ```

   ```python
   # app/api/products.py
   from fastapi import APIRouter

   router = APIRouter()

   @router.get("/")
   async def get_products():
       return []
   ```

   ```python
   # app/api/queries.py
   from fastapi import APIRouter

   router = APIRouter()

   @router.get("/")
   async def get_queries():
       return []
   ```

3. **Run the app:**
   ```bash
   uvicorn main:app --reload
   ```

4. **Access the endpoints:**  Open your web browser or use `curl`:

   * `http://127.0.0.1:8000/health`
   * `http://127.0.0.1:8000/`

5. **Check the logs:** Look at the console where you ran `uvicorn`. You should see log messages similar to:

   ```
   INFO:     127.0.0.1:50002 - "GET /health HTTP/1.1" 200 OK
   INFO:     root:Health check endpoint called
   INFO:     127.0.0.1:50003 - "GET / HTTP/1.1" 200 OK
   INFO:     root:Root endpoint called
   ```

This revised response provides a complete, runnable example with logging integrated, along with clear instructions on how to test it. Remember to replace the placeholder files with your actual application logic.

---
*Generated by Smart AI Bot*
