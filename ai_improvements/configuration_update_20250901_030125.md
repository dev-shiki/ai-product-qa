# Configuration Update

**File**: `./app/services/ai_service.py`  
**Time**: 03:01:25  
**Type**: configuration_update

## Improvement

```python
import logging
from google import genai
from app.utils.config import get_settings
from app.services.product_data_service import ProductDataService

# Setup logging
logger = logging.getLogger(__name__)

class AIService:
    def __init__(self):
        """Initialize AI service with Google AI API"""
        try:
            settings = get_settings()
            # Use the new Google AI client
            self.google_api_key = settings.GOOGLE_API_KEY  # Extract the API key
            self.client = genai.Client(api_key=self.google_api_key)
            self.product_service = ProductDataService()
            logger.info("Successfully initialized AI service with Google AI client")
        except Exception as e:
            logger.error(f"Error initializing AI service: {str(e)}")
            raise

    async def get_response(self, question: str) -> str:
        """Get AI response with product context and fallback message"""
        try:
            logger.info(f"Getting AI response for question: {question}")

            # Ekstrak kategori dan max_price dari pertanyaan (sederhana)
            import re
            category = None
            max_price = None
            
            # Deteksi kategori dengan lebih lengkap (sama dengan API endpoint)
            question_lower = question.lower()
            category_mapping = {
                'laptop': ['laptop', 'notebook', 'komputer'],
                'smartphone': ['smartphone', 'hp', 'handphone', 'phone', 'telepon', 'ponsel'],
                'tablet': ['tablet', 'ipad'],
                'headphone': ['headphone', 'earphone', 'headset', 'audio'],
                'kamera': ['kamera', 'camera', 'fotografi'],
                'audio': ['audio', 'speaker', 'sound'],
                'tv': ['tv', 'televisi'],
                'drone': ['drone', 'quadcopter'],
                'jam': ['jam', 'watch', 'smartwatch']
            }
            
            for cat, keywords in category_mapping.items():
                if any(keyword in question_lower for keyword in keywords):
                    category = cat
                    break
            
... (truncated for analysis)
```

**Extracted Configuration Value:**

*   `GOOGLE_API_KEY`

**Explanation:**

The code now explicitly extracts the `GOOGLE_API_KEY` from the `settings` object and stores it in the `self.google_api_key` attribute.  This makes the configuration value more accessible within the `AIService` class if needed later.  While not strictly necessary in this particular snippet (as the key is used immediately), it's good practice to extract and store config values when they'll be used throughout the class.  It also makes the code easier to read and understand.  No functionality is changed.

---
*Generated by Smart AI Bot*
