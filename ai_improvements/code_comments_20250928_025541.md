# Code Comments

**File**: `./frontend/streamlit_app.py`  
**Time**: 02:55:41  
**Type**: code_comments

## Improvement

```python
import streamlit as st
import requests
import json
from datetime import datetime
import time

# Configuration
API_BASE_URL = "http://localhost:8000"

def main():
    st.set_page_config(
        page_title="Product Assistant",
        page_icon="üõçÔ∏è",
        layout="wide",
        initial_sidebar_state="expanded"
    )
    
    # Custom CSS for dark theme
    st.markdown("""
    <style>
    .main-header {
        font-size: 2.5rem;
        font-weight: bold;
        color: #ffffff;
        text-align: center;
        margin-bottom: 1rem;
    }
    .sub-header {
        font-size: 1.1rem;
        color: #bdc3c7;
        text-align: center;
        margin-bottom: 2rem;
    }
    .product-card {
        border: 1px solid #34495e;
        border-radius: 12px;
        padding: 1.2rem;
        margin: 0.8rem 0;
        background: #2c3e50;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        transition: transform 0.2s ease;
    }
    .product-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    .product-name {
        font-size: 1.2rem;
        font-weight: 600;
        color: #ffffff;
    }
    .product-description {
        color: #bdc3c7;
    }
    .product-price {
        font-size: 1.1rem;
        font-weight: bold;
        color: #f1c40f;
    }
    .product-link {
        color: #3498db;
        text-decoration: none;
    }
    .product-link:hover {
        text-decoration: underline;
    }
    body {
        background-color: #222f3d;
        color: #ffffff;
    }
    </style>
    """, unsafe_allow_html=True)

    st.markdown("<h1 class='main-header'>Product Assistant</h1>", unsafe_allow_html=True)
    st.markdown("<p class='sub-header'>Your AI-powered shopping companion.</p>", unsafe_allow_html=True)

    # Sidebar for user input
    with st.sidebar:
        st.header("Product Search")
        query = st.text_input("Enter product query:", placeholder="e.g., running shoes")
        max_products = st.slider("Maximum Products to Display:", min_value=1, max_value=20, value=5)
        search_button = st.button("Search")

    # Main content area
    col1, col2 = st.columns([3, 1])  # Adjust column widths as needed

    with col1:
        if search_button and query:
            try:
                params = {"query": query, "max_products": max_products}
                response = requests.get(f"{API_BASE_URL}/search", params=params)
                response.raise_for_status()  # Raise HTTPError for bad responses (4xx or 5xx)
                products = response.json()

                if products:
                    for product in products:
                        st.markdown(f"""
                            <div class='product-card'>
                                <h3 class='product-name'>{product['name']}</h3>
                                <p class='product-description'>{product['description']}</p>
                                <p class='product-price'>Price: ${product['price']}</p>
                                <a class='product-link' href='{product['link']}' target='_blank'>View Product</a>
                            </div>
                            """, unsafe_allow_html=True)
                else:
                    st.info("No products found for your query.")

            except requests.exceptions.RequestException as e:
                st.error(f"Error: Could not connect to the API. Please ensure the API is running. Details: {e}")
            except json.JSONDecodeError as e:
                st.error(f"Error: Could not decode the API response.  The API might be returning invalid data. Details: {e}")
            except Exception as e:
                st.error(f"An unexpected error occurred: {e}")

    with col2:
        st.header("Recommendations")
        st.write("Here we would have product recommendations based on search history.")
        # Add more content here for the second column

    # Footer
    st.markdown("---")
    st.markdown("<p style='text-align: center; color: #7f8c8d;'>Made with ‚ù§Ô∏è using Streamlit</p>", unsafe_allow_html=True)


if __name__ == "__main__":
    main()
```

```python
import streamlit as st
import requests
import json
from datetime import datetime
import time

# Configuration
API_BASE_URL = "http://localhost:8000"

def main():
    st.set_page_config(
        page_title="Product Assistant",
        page_icon="üõçÔ∏è",
        layout="wide",
        initial_sidebar_state="expanded"
    )
    
    # Custom CSS for dark theme
    st.markdown("""
    <style>
    .main-header {
        font-size: 2.5rem;
        font-weight: bold;
        color: #ffffff;
        text-align: center;
        margin-bottom: 1rem;
    }
    .sub-header {
        font-size: 1.1rem;
        color: #bdc3c7;
        text-align: center;
        margin-bottom: 2rem;
    }
    .product-card {
        border: 1px solid #34495e;
        border-radius: 12px;
        padding: 1.2rem;
        margin: 0.8rem 0;
        background: #2c3e50;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        transition: transform 0.2s ease;
    }
    .product-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    .product-name {
        font-size: 1.2rem;
        font-weight: 600;
        color: #ffffff;
    }
    .product-description {
        color: #bdc3c7;
    }
    .product-price {
        font-size: 1.1rem;
        font-weight: bold;
        color: #f1c40f;
    }
    .product-link {
        color: #3498db;
        text-decoration: none;
    }
    .product-link:hover {
        text-decoration: underline;
    }
    body {
        background-color: #222f3d;
        color: #ffffff;
    }
    </style>
    """, unsafe_allow_html=True)

    st.markdown("<h1 class='main-header'>Product Assistant</h1>", unsafe_allow_html=True)
    st.markdown("<p class='sub-header'>Your AI-powered shopping companion.</p>", unsafe_allow_html=True)

    # Sidebar for user input
    with st.sidebar:
        st.header("Product Search")
        query = st.text_input("Enter product query:", placeholder="e.g., running shoes")
        max_products = st.slider("Maximum Products to Display:", min_value=1, max_value=20, value=5)
        search_button = st.button("Search")

    # Main content area
    col1, col2 = st.columns([3, 1])  # Adjust column widths as needed

    with col1:
        if search_button and query:
            try:
                # Prepare the parameters for the API request
                params = {"query": query, "max_products": max_products}
                # Send a GET request to the API endpoint for searching products
                response = requests.get(f"{API_BASE_URL}/search", params=params)
                # Raise an exception for HTTP errors (status codes 4xx or 5xx)
                response.raise_for_status()
                # Parse the JSON response from the API
                products = response.json()

                if products:
                    # Iterate through the list of products and display each one
                    for product in products:
                        # Format the product information using HTML and CSS for styling
                        st.markdown(f"""
                            <div class='product-card'>
                                <h3 class='product-name'>{product['name']}</h3>
                                <p class='product-description'>{product['description']}</p>
                                <p class='product-price'>Price: ${product['price']}</p>
                                <a class='product-link' href='{product['link']}' target='_blank'>View Product</a>
                            </div>
                            """, unsafe_allow_html=True)
                else:
                    # Display a message if no products are found
                    st.info("No products found for your query.")

            except requests.exceptions.RequestException as e:
                # Handle exceptions related to the API request (e.g., connection errors)
                st.error(f"Error: Could not connect to the API. Please ensure the API is running. Details: {e}")
            except json.JSONDecodeError as e:
                # Handle exceptions related to JSON decoding (e.g., invalid JSON format)
                st.error(f"Error: Could not decode the API response.  The API might be returning invalid data. Details: {e}")
            except Exception as e:
                # Handle any other unexpected exceptions
                st.error(f"An unexpected error occurred: {e}")

    with col2:
        st.header("Recommendations")
        st.write("Here we would have product recommendations based on search history.")
        # Add more content here for the second column

    # Footer
    st.markdown("---")
    st.markdown("<p style='text-align: center; color: #7f8c8d;'>Made with ‚ù§Ô∏è using Streamlit</p>", unsafe_allow_html=True)


if __name__ == "__main__":
    main()
```

---
*Generated by Smart AI Bot*
